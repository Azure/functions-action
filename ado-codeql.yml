jobs:
  - job: "Build_AND_Start_CodeQL_Reporting"
    variables:
      ApplicationInsightAgentVersion: 3.4.16
      Codeql.Enabled: true
      Codeql.Language: javascript
      Codeql.Cadence: 0

    pool:
      name: '1ES-Hosted-AzFunc'
      demands:
        - ImageOverride -equals MMS2019TLS
    
    steps:
    - checkout: self
    - task: CodeQL3000Init@0
      inputs:
        Enabled: true
        Language: javascript
        Cadence: 0
    #    ExcludePathPatterns: $(Build.SourcesDirectory)\tests

    # Build tasks no needed for javascript
    # CodeQL WILL NOT WORK for compiled languages if there are no build tasks here
    #- pwsh: '& .\release.ps1'
    #  displayName: 'Build project with javascript library'

    - task: CodeQL3000Finalize@0
      condition: always()